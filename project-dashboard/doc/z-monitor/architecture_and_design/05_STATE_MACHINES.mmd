graph TD
    subgraph "1. Application Main State"
        A[Startup] --> B{Initialize};
        B --> C{Patient<br/>Assigned?};
        C -- No --> D[Login Required<br/>Admit Patient];
        C -- Yes --> E[View Only<br/>Vitals Display];
        D -- Login OK --> F[Configuration Mode<br/>Inactivity Timer];
        E -- Config Action --> D;
        F -- Config Action --> F;
        F -- 5min Inactive<br/>OR Logout --> E;
        F --> G[Settings];
        G --> F;
    end

    subgraph "2. Network Connection"
        NetA[Disconnected] --> NetB{Attempt};
        NetB --> NetC[Connecting];
        NetC -- OK --> NetD[Connected];
        NetC -- Fail --> NetA;
        NetD -- Error --> NetE[Reconnecting];
        NetE -- OK --> NetD;
        NetE -- Fail --> NetA;
    end

    subgraph "3. Alarm Lifecycle"
        AlmA[Normal] --> AlmB{Condition Met};
        AlmB --> AlmC[Active Unack];
        AlmC -- Ack --> AlmD[Active Ack];
        AlmC -- Silence --> AlmE[Silenced];
        AlmE -- Timeout --> AlmC;
        AlmD -- Cleared --> AlmA;
        AlmE -- Cleared --> AlmA;
    end

    subgraph "4. User Authentication"
        AuthA[Logged Out] --> AuthB[Login Screen];
        AuthB -- Credentials OK --> AuthC[Logged In<br/>Config Mode];
        AuthB -- Credentials Fail --> AuthB;
        AuthC -- Config Action --> AuthC;
        AuthC -- 4min Inactive --> AuthD[Inactivity Warning<br/>1min Remaining];
        AuthD -- Action --> AuthC;
        AuthD -- 1min Timeout --> AuthE[Auto Logout];
        AuthC -- Manual Logout --> AuthF[User Logout];
        AuthE --> AuthA;
        AuthF --> AuthA;
    end

    subgraph "5. Infusion Pump"
        PumpA[Idle] --> PumpB{Start};
        PumpB --> PumpC[Infusing];
        PumpC -- Stop --> PumpA;
        PumpC -- Occlusion --> PumpD[Alarm];
        PumpD -- Clear --> PumpC;
    end
